#!/bin/sh

# compiles latex in a pipe
#
# compiles latex from stdin and emits
# dvi to stdout

TDIR=`mktemp -d`
tee "$TDIR/file.tex" > /dev/null
cd "${TDIR}"
latex -interaction batchmode -halt-on-error file.tex 1> /dev/null 2>&1 
cp file.log /tmp/latexpipe-log.log
cat file.dvi
cd ..
rm -r ${TDIR}
